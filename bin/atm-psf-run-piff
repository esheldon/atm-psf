#!/usr/bin/env python

from atm_psf.process import process_image_with_piff


def get_args():
    import argparse
    parser = argparse.ArgumentParser()
    parser.add_argument('--image', required=True)
    parser.add_argument('--truth', required=True)
    parser.add_argument('--piff', required=True)
    parser.add_argument('--sources', required=True)
    parser.add_argument('--seed', type=int, required=True)
    parser.add_argument('--show', action='store_true')
    parser.add_argument('--no-find-sky', action='store_true',
                        help='just use the sky from the truth catalog')
    return parser.parse_args()


if __name__ == '__main__':
    args = get_args()
    process_image_with_piff(
        image_file=args.image,
        truth_file=args.truth,
        piff_file=args.piff,
        source_file=args.sources,
        seed=args.seed,
        show=args.show,
        no_find_sky=args.no_find_sky
    )
